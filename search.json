[{"title":"生成函数笔记","path":"/2025/11/23/组合计数/","content":"二项式反演内容记 表示恰好使用 个有标号的元素形成特定结构的方案数， 表示从 个有标号的元素中选出 个元素形成特定结构的总方案数。 将 带入 ： 由 ，即从 个人中选出 个副班长，再从中选出 个班长等价于先选 个班长，再从剩下的人中选出 个副班长。 可得 变形 组合意义： 表示钦定选 个物品的方案数（其余物品随意）， 表示恰好选 个物品的方案数。对于 ， 在 中被计算了 次。 注意 不代表至少选 个物品的方案数，因为其中一些方案会被多次计算。 推广二维二项式反演： 适用于一些二维问题 (? 优化直接反演 太慢了。 我们可以用卷积优化二项式反演使其做到 。 形式一： 拆开组合数，得 ，这是标准的卷积形式，直接 NTT 即可。 形式二： 拆开组合数，得 。 令 ，则 。发现这是一个标准的差卷积形式。 具体地，令 ，，则 即 。直接将 和 卷起来即可求出 。 那么 。 P4491 题意：一共有 种颜色，需要给长度为 的序列染色。给定 ，若出现 次的颜色有 种，将会获得 的奖励。求所有染色方案的奖励和，对 取模（质数）。。 设 表示钦定 个颜色出现 次的方案数， 表示恰好 个颜色出现 次的方案数。则 。 先算 。选出 种颜色 ，再选出 个位置并排列 ，最后由于同一个颜色的位置不能交换，除以 。这 个颜色外的其它颜色可以随便填，。 则 。直接反演是 的，按照上述方法优化即可。 时间复杂度 。 例题错排问题 给定 ，求长度为 的序列的错排数量。 设 为恰好有 个位置错开， 为至多有 个位置错开 容易发现 ，则运用形式一反演可得：。 预处理组合数，时间复杂度 。 P4859 题意：给定长度为 的两个序列 ，将 中的元素和 中的一一配对，求有多少种方案使得 ĵ 的对数比 的对数恰好多 组。 设 表示 的对数，因此 ，解得 。 先将 和 按升序排序。考虑 dp，设 表示 中小于 的元素个数， 表示 已经匹配好，有至少 个位置满足 的方案数。 考虑转移，可以从 转移；另一种是从 转移，因为 是升序的，所以第 位能选的方案数是 。 由于 中我们只考虑了 的位置，其他位置可以随便排，因此设 。 运用形式二反演可得：。答案即为 ，时间复杂度 。 P6076 题意：给定 ，求用 种颜色给一个 的网格染色，使得每种颜色都出现且每行每列都至少被染了一格的方案数。。 做法一：设 表示至多用 种颜色的方案数， 表示恰好用 种颜色的方案数。那么 ，反演得 。 考虑如何求出 。设 表示最多用 种颜色，至多保证 列合法的方案数， 表示至多用 种颜色，恰好保证 列合法的方案数。则 。 考虑到 ，那么 。 ，其中 。 做法二：二维二项式反演。设 是恰好用 种颜色的合法方案数。设 表示用 种颜色染色，至多保证 行 列合法的方案数。设 表示用 种颜色，恰好保证 行 列合法的方案数。 则 ，。 同时我们有 。则 。 故 ，后面那项是因为不合法的方案还包括有颜色没用的情况。 时间复杂度 。 P10681 题意：一个 的矩阵，求有多少种填数方法，使得每行每列的和等于 1 或者 2。。 做法：设有 行和为 1， 行和为 2， 列和为 1， 列和为 2。那么因为是网格图，必有 。故枚举 ，可以得到 。 将这个题转化为组合问题。考虑有 种球，每种球有 1 个，还有 种球，每种球有 2 个；现要将这 个球放入 个盒子，使得：（1）同种球不能放入同一个盒子，（2）恰有 个盒子中有 1 个球， 个盒子中有 2 个球，问有多少种方案。 我们先考虑（2）限制。我们将这 个球进行排列，并钦定前 个放入那些只容纳一个的盒子，后面的放入两个的盒子，注意这里因为是排列所以直接钦定一个放入顺序即可。 再考虑（1）限制。二项式反演，设 表示钦定 个盒子有 2 个同种类球的方案数， 表示恰好 个盒子有 2 个同种类球的方案数。 。反演，。 最后，我们发现，考虑完限制（1）后，一个装着两个球的盒子里的球交换后会被算重，那么需要乘上 。 所以答案就是 。时间复杂度 。 CF285E 题意：求有多少个长度为 的排列 ，使得恰好存在 个位置满足 。。 做法：排列很难，但是题目里的限制很强，因为 要求 或者 ，基本上就定死了 ，那么我们考虑用二项式反演去忽略掉除了“好位置”以外的位置。 设 表示钦定 个好位置的方案数， 表示恰好 个好位置的方案数。那么 。考虑怎么去求 。 设 表示前 位，有 个好位置。考虑到前面的位置可能会占用 ，故修改状态为 表示前 位，有 个好位置，是否占用了 ，是否占用了 。注意这里因为我们求的是 ，因此不是好位置的位置不应该填数，那么 。 转移如下：第 位是好位置： 第 位不是好位置： 最后反演一下就行了。时间复杂度 。 斯特林数第一类斯特林数记号： 定义：将 个元素分成 个环的方案数（环旋转后算同一个） 解释：考虑可以新建一个环 ，也可以在某个环中间插入，环长和为 ，总插入点个数为 ，方案数为 。 恒等式： 证明：考虑一个置换会被拆分成若干个轮换（环），枚举环的个数再求和就是置换的个数。 上升幂 证明一：考虑归纳法。。 证明二：考虑第 行斯特林数的生成函数 。那么根据递推式，。因此 。 我们可以快速地求出同一行的第一类斯特林数。 根据上述结论，有 ，我们如果能快速地求出 ，那么就可以倍增地求出同一行的第一类斯特林数。令 。 这是个标准的差卷积，直接把 倒过来和 卷起来即可求出 的系数。 时间复杂度 。注意 是奇数时需要暴力把 卷起来。 下降幂 。 证明：。 第二类斯特林数记号： 定义：将 个元素划分成 个集合的方案数 解释：考虑可以新建一个盒子 ，也可以丢进之前的一个盒子 。 恒等式： 证明：考虑组合意义。 代表将 个不同球放入 个不同盒子的方案数。那么，我们枚举非空的盒子个数 ，并将这 个球放入这 个盒子 ，同时选出这 个非空的盒子 并排列 。 推论： 证明：。 由组合恒等式 （考虑在 个数中选出 个，枚举最大的那个数 ，然后在 的数中选出 个）可得 。 可以使用卷积优化二项式反演快速求出同一行内的第二类斯特林数。 令 ，，则 。 则 ，直接 NTT 即可。"},{"title":"生成函数笔记","path":"/2025/11/23/luogu/组合计数/","content":"二项式反演内容记 表示恰好使用 个有标号的元素形成特定结构的方案数， 表示从 个有标号的元素中选出 个元素形成特定结构的总方案数。 将 带入 ： 由 ，即从 个人中选出 个副班长，再从中选出 个班长等价于先选 个班长，再从剩下的人中选出 个副班长。 可得 变形 组合意义： 表示钦定选 个物品的方案数（其余物品随意）， 表示恰好选 个物品的方案数。对于 ， 在 中被计算了 次。 注意 不代表至少选 个物品的方案数，因为其中一些方案会被多次计算。 推广二维二项式反演： 适用于一些二维问题 (? 优化直接反演 太慢了。 我们可以用卷积优化二项式反演使其做到 。 形式一： 拆开组合数，得 ，这是标准的卷积形式，直接 NTT 即可。 形式二： 拆开组合数，得 。 令 ，则 。发现这是一个标准的差卷积形式。 具体地，令 ，，则 即 。直接将 和 卷起来即可求出 。 那么 。 P4491 题意：一共有 种颜色，需要给长度为 的序列染色。给定 ，若出现 次的颜色有 种，将会获得 的奖励。求所有染色方案的奖励和，对 取模（质数）。。 设 表示钦定 个颜色出现 次的方案数， 表示恰好 个颜色出现 次的方案数。则 。 先算 。选出 种颜色 ，再选出 个位置并排列 ，最后由于同一个颜色的位置不能交换，除以 。这 个颜色外的其它颜色可以随便填，。 则 。直接反演是 的，按照上述方法优化即可。 时间复杂度 。 例题错排问题 给定 ，求长度为 的序列的错排数量。 设 为恰好有 个位置错开， 为至多有 个位置错开 容易发现 ，则运用形式一反演可得：。 预处理组合数，时间复杂度 。 P4859 题意：给定长度为 的两个序列 ，将 中的元素和 中的一一配对，求有多少种方案使得 ĵ 的对数比 的对数恰好多 组。 设 表示 的对数，因此 ，解得 。 先将 和 按升序排序。考虑 dp，设 表示 中小于 的元素个数， 表示 已经匹配好，有至少 个位置满足 的方案数。 考虑转移，可以从 转移；另一种是从 转移，因为 是升序的，所以第 位能选的方案数是 。 由于 中我们只考虑了 的位置，其他位置可以随便排，因此设 。 运用形式二反演可得：。答案即为 ，时间复杂度 。 P6076 题意：给定 ，求用 种颜色给一个 的网格染色，使得每种颜色都出现且每行每列都至少被染了一格的方案数。。 做法一：设 表示至多用 种颜色的方案数， 表示恰好用 种颜色的方案数。那么 ，反演得 。 考虑如何求出 。设 表示最多用 种颜色，至多保证 列合法的方案数， 表示至多用 种颜色，恰好保证 列合法的方案数。则 。 考虑到 ，那么 。 ，其中 。 做法二：二维二项式反演。设 是恰好用 种颜色的合法方案数。设 表示用 种颜色染色，至多保证 行 列合法的方案数。设 表示用 种颜色，恰好保证 行 列合法的方案数。 则 ，。 同时我们有 。则 。 故 ，后面那项是因为不合法的方案还包括有颜色没用的情况。 时间复杂度 。 P10681 题意：一个 的矩阵，求有多少种填数方法，使得每行每列的和等于 1 或者 2。。 做法：设有 行和为 1， 行和为 2， 列和为 1， 列和为 2。那么因为是网格图，必有 。故枚举 ，可以得到 。 将这个题转化为组合问题。考虑有 种球，每种球有 1 个，还有 种球，每种球有 2 个；现要将这 个球放入 个盒子，使得：（1）同种球不能放入同一个盒子，（2）恰有 个盒子中有 1 个球， 个盒子中有 2 个球，问有多少种方案。 我们先考虑（2）限制。我们将这 个球进行排列，并钦定前 个放入那些只容纳一个的盒子，后面的放入两个的盒子，注意这里因为是排列所以直接钦定一个放入顺序即可。 再考虑（1）限制。二项式反演，设 表示钦定 个盒子有 2 个同种类球的方案数， 表示恰好 个盒子有 2 个同种类球的方案数。 。反演，。 最后，我们发现，考虑完限制（1）后，一个装着两个球的盒子里的球交换后会被算重，那么需要乘上 。 所以答案就是 。时间复杂度 。 CF285E 题意：求有多少个长度为 的排列 ，使得恰好存在 个位置满足 。。 做法：排列很难，但是题目里的限制很强，因为 要求 或者 ，基本上就定死了 ，那么我们考虑用二项式反演去忽略掉除了“好位置”以外的位置。 设 表示钦定 个好位置的方案数， 表示恰好 个好位置的方案数。那么 。考虑怎么去求 。 设 表示前 位，有 个好位置。考虑到前面的位置可能会占用 ，故修改状态为 表示前 位，有 个好位置，是否占用了 ，是否占用了 。注意这里因为我们求的是 ，因此不是好位置的位置不应该填数，那么 。 转移如下：第 位是好位置： 第 位不是好位置： 最后反演一下就行了。时间复杂度 。 斯特林数第一类斯特林数记号： 定义：将 个元素分成 个环的方案数（环旋转后算同一个） 解释：考虑可以新建一个环 ，也可以在某个环中间插入，环长和为 ，总插入点个数为 ，方案数为 。 恒等式： 证明：考虑一个置换会被拆分成若干个轮换（环），枚举环的个数再求和就是置换的个数。 上升幂 证明一：考虑归纳法。。 证明二：考虑第 行斯特林数的生成函数 。那么根据递推式，。因此 。 我们可以快速地求出同一行的第一类斯特林数。 根据上述结论，有 ，我们如果能快速地求出 ，那么就可以倍增地求出同一行的第一类斯特林数。令 。 这是个标准的差卷积，直接把 倒过来和 卷起来即可求出 的系数。 时间复杂度 。注意 是奇数时需要暴力把 卷起来。 :::success[代码【模板】第一类斯特林数·行] #include bits/stdc++.husing namespace std;const int mod = 167772161, g = 3, invg = 55924054, N = 1.2e6 + 5;int qpow(int a, int b) { int ret = 1; for(; b; a = a * 1ll * a % mod, b = 1) if(b1) ret = ret * 1ll * a % mod; return ret; }struct poly { int n; int a[N]; } ans; int rev[N], k, n, fac[N], inv[N];inline void init(int k) { for(int i = 0; i (1 k); i++) rev[i] = (rev[i1] 1) | ((i1) (k - 1)); }void NTT(poly a, int tp) {\tfor(int i = 0; i a.n; i++) if(i rev[i]) swap(a.a[i], a.a[rev[i]]);\tfor(int p = 1; p a.n; p = 1) { int wrt = qpow(tp == 1 ? g : invg, (mod - 1) / p / 2); for(int j = 0; j a.n; j += p * 2) { int w = 1; for(int k = j; k j + p; k++) { int x = a.a[k], y = a.a[k+p] * 1ll * w % mod; a.a[k] = (x + y) % mod, a.a[k+p] = (x - y) % mod; w = w * 1ll * wrt % mod; } }\t}}void operator * (poly a, poly b) {\ta.n = 1 k, b.n = 1 k; NTT(a, 1); NTT(b, 1);\tfor(int i = 0; i a.n; i++) a.a[i] = a.a[i] * 1ll * b.a[i] % mod; NTT(a, -1);\tint inv = qpow(a.n, mod - 2); for(int i = 0; i a.n; i++) a.a[i] = a.a[i] * 1ll * inv % mod;}poly F, G, ret;void shift(poly a, int n, int c) {\tint t = 1; for(int i = 0; i = n; i++, t = t * 1ll * c % mod) F.a[i] = t * 1ll * inv[i] % mod;\tfor(int i = 0; i = n; i++) G.a[i] = fac[i] * 1ll * a.a[i] % mod; reverse(G.a, G.a + n + 1);\tk = 0; while((1 k) = 2 * n + 2) k++; init(k);\tF * G;\tfor(int i = 0; i = n; i++) ret.a[i] = inv[i] * 1ll * F.a[n-i] % mod;}void solve(poly a, int n) {\tif(n == 1) { return a.a[1] = 1, void(); }\tif(n 1) { solve(a, n - 1); for(int i = n; i = 0; i--) a.a[i] = ((i ? a.a[i-1] : 0) + a.a[i] * 1ll * (n - 1) % mod) % mod;\t}\telse { int mid = n / 2; solve(a, mid); shift(a, mid, mid); k = 0; while((1 k) = 2 * mid + 2) k++; init(k); a * ret; for(int i = n + 1; i (1 k); i++) a.a[i] = 0; for(int i = mid + 1; i (1 k); i++) F.a[i] = 0, G.a[i] = 0;\t}}int main() {\tscanf(\"%d\", n);\tfac[0] = 1; for(int i = 1; i = n; i++) fac[i] = fac[i-1] * 1ll * i % mod;\tinv[n] = qpow(fac[n], mod - 2);\tfor(int i = n - 1; i = 0; i--) inv[i] = inv[i+1] * 1ll * (i + 1) % mod;\tsolve(ans, n); for(int i = 0; i = n; i++) printf(\"%d \", (ans.a[i] + mod) % mod);\treturn 0;} 下降幂 。 证明：。 第二类斯特林数记号： 定义：将 个元素划分成 个集合的方案数 解释：考虑可以新建一个盒子 ，也可以丢进之前的一个盒子 。 恒等式： 证明：考虑组合意义。 代表将 个不同球放入 个不同盒子的方案数。那么，我们枚举非空的盒子个数 ，并将这 个球放入这 个盒子 ，同时选出这 个非空的盒子 并排列 。 推论： 证明：。 由组合恒等式 （考虑在 个数中选出 个，枚举最大的那个数 ，然后在 的数中选出 个）可得 。 可以使用卷积优化二项式反演快速求出同一行内的第二类斯特林数。 令 ，，则 。 则 ，直接 NTT 即可。 :::success[代码【模板】第二类斯特林数·行] #include bits/stdc++.husing namespace std;const int mod = 167772161, g = 3, invg = 55924054, N = 1e6 + 5;typedef long long ll;ll qpow(ll a, ll b) { ll ret = 1; for(; b; a = a * a % mod, b = 1) if(b1) ret = ret * a % mod; return ret; }struct poly { int n; ll a[N]; } F, G; int rev[N], k, n; ll inv[N];inline void init(int k) { for(int i = 0; i (1 k); i++) rev[i] = (rev[i1] 1) | ((i1) (k - 1)); }void NTT(poly a, int tp) {for(int i = 0; i a.n; i++) if(i rev[i]) swap(a.a[i], a.a[rev[i]]);for(int p = 1; p a.n; p = 1) {\tll wrt = qpow(tp == 1 ? g : invg, (mod - 1) / p / 2);\tfor(int j = 0; j a.n; j += p * 2) { ll w = 1; for(int k = j; k j + p; k++) { ll x = a.a[k], y = a.a[k+p]; a.a[k] = (x + y * w % mod) % mod, a.a[k+p] = (x - y * w % mod) % mod; w = w * wrt % mod; }\t}}}poly operator * (poly a, poly b) {a.n = 1 k, b.n = 1 k; NTT(a, 1); NTT(b, 1);for(int i = 0; i a.n; i++) a.a[i] = a.a[i] * b.a[i] % mod; NTT(a, -1);ll inv = qpow(a.n, mod - 2); for(int i = 0; i a.n; i++) a.a[i] = a.a[i] * inv % mod;return a;}int main() {scanf(\"%d\", n);inv[n] = 1; for(int i = 1; i = n; i++) inv[n] = inv[n] * i % mod; inv[n] = qpow(inv[n], mod - 2);for(int i = n - 1; i = 0; i--) inv[i] = inv[i+1] * (i + 1) % mod;while((1 k) = 2 * n + 2) k++; init(k);for(int i = 0; i = n; i++) F.a[i] = qpow(i, n) * inv[i] % mod, G.a[i] = ((i 1) ? -1 : 1) * inv[i] % mod;F = F * G;for(int i = 0; i = n; i++) printf(\"%lld \", (F.a[i] + mod) % mod);return 0;}"},{"title":"政治学笔记","path":"/2025/10/19/政治学笔记/","content":"第一单元 政治的概念古今中外各种政治思潮最核心的区别在于对政治的概念的不同理解“政治”一词在我国古代：政事得以治理在我国近代，政治一词由中国传入日本，再传回中国 希腊语polis（城邦）地域概念转化为人的概念 亚里士多德（理想主义）： 至上性：其他科学都为其服务决定其他科学的目的 公共性：治理平等自由人城邦是共同体（有机体理论）政治只处理公事，追求最高的善人在本性上是政治的动物 政治与理性演说 总结：管理众人的事 由众人参与 以正当形式行使 现实主义韦伯（社会学创始人之一）：经济的繁荣不代表政治的强大 政治在本质上关乎民族国家的生存权利施密特（批判自由主义）：政治划分敌，团结朋友打击敌人 认为总有冲突无法通过协商解决 国家内政问题转化为法律问题 政治的核心：服从的道理和反抗的缘由 第二单元 政治学科历史传统政治学 古希腊和古罗马希罗多德 《历史》三种政体修昔底德 《伯罗奔尼撒战争史》政治演说柏拉图 《理想国》正义 政体 德行 教育亚里士多德 《政治学》《尼各马可伦理学》政治科学斯多葛学派 克里斯波斯、帕那提乌斯 普世人类和自然法 自由主义的渊源波里比乌斯 政体循环与混合政体西塞罗 混合政体与自然法 中世纪奥古斯丁 自由意志：人对自身行为负有道德责任托马斯阿奎那 混合政体与自然法文艺复兴和启蒙运动：马基雅维利《君主论》《论李维》：现实主义政治；共和观念主权学说：让布丹《国家六论》托马斯霍普斯 《利维坦》《论公民》利维坦、自然状态与新公民约翰洛克 《政府论》自然状态权力与分权孟德斯鸠 《论法的精神》政体、分权制衡 政治科学 19世纪 科学方法的勃兴历史主义与进化论孔德和圣西门 历史实证主义：神学-玄学-科学赫伯特斯宾塞：社会进化论梅因：古代法和现代法韦伯和涂尔干：现代理性与传统 有机聚集与机械式聚集 20世纪 政治科学的专业化芝加哥学派 哈罗德拉斯威尔 第三单元 政治学概论社会科学：社会学、经济学、政治学构成了以国家为中心的三位一体，研究普遍规律 政治学学科的发展中世纪：神学医学法学哲学1880 美国哥伦比亚大学政治研究院 现代政治学学科独立的标志1903 美国政治学会成立。《美国政治学评论》创刊，表示着政治学科的大体确立中国：1903 京师大学堂（北京大学）中国最早开设政治学课程钱端升1952 院系调整 中国大学取消政治系1979 改开 邓小平支持政治学研究1980 成立中国政治学会中国政治学现状：受地方权力、商品经济的影响 政治学基本框架主要领域：政治理论，政治制度，政治行为，比较政治学，国际关系，公共政策与行政，政治经济学，政治学方法论政治理论：描述性方法规范性方法（是什么和应该是什么） 制度主义，行为主义，理性选择，马克思主义，女权主义交叉学科：政治哲学 政治哲学关心的核心问题是治理 认同问题 宗教与政治、民族主义、自由主义、群体主义 政体问题，政治制度问题 民主共和权威主义 公共政策问题 公平正义 政治经济学 国家对经济事务的管理 经济制度对国家的影响政治社会学 政治对社会的影响和社会对政治的影响 第四单元：政治学研究的方法和视角社会“科学”的起源中世纪：神学医学法学哲学哲学-科学人文法国大革命与社会科学的形成：社会变革成为常态、人民做主成为可能 社会科学的不同视角人文视角： 规范性研究（人与社会应然的研究，应该怎么样） 解析流派（对话语的描述与理解） 科学视角：实证主义（对社会科学的观察与解释） 物质世界与社会世界“社会世界”：关系、权力、民族、国家 存在论、认识论与方法论 实证主义 解析流派 存在论 独立的社会世界 建构的社会世界 认识论 直接观察并解释 理解与深层结构 方法论 定量研究 定性研究 政治学研究视角行为主义：基于实证主义，观察行为理性选择：微观个体 “理论”一词的狭义定义：系统化解释，对一种规律的表述；描述性，解释性，预测性 第五单元 现代国际体系的基础国际体系：由诸多相互作用的国际行为体组合而成的整体现代国际体系 无序（无政府anarchy）- 国家间的竞争 资本主义在全球的扩张 民族国家的形成背景： 欧洲的政治割据与军事竞争 持久性和残酷性军事竞争与国家：国家组织的职业化与专业化 国家自主性与能力提升 国家形式的同化趋势 概念：多种称谓：民族国家、现代国家、有机国家民族国家：民族主义加强国内凝聚力现代国家：强调统治力更强有机国家：结构（国家、社会）分明，能够互相促进发展传统定义： 一系列机构 全职行政官员 特定的地域 对暴力工具的合法垄断 对控制一定领土的机构以及定居在这片领土上的人的合法抽象 核心特点：统治力与主权两层含义： 国内层面：国家组织与国家机构的总称，与社会相对（强调统治力） 国际层面：一定领土内人与机构的总称，与其他主权国家相对（强调主权） 欧洲早期的经济形态：自给自足的生产方式（互补性贸易）远程贸易与地方贸易从互补性贸易到竞争性贸易（市场经济） 市场经济的概念多种称谓：市场经济、资本主义经济、现代经济传统定义：商品生产、生产资料的私人垄断占有、劳动力的自由买卖及其生产资料的分离核心特点：专业化生产与贸易核心动力：中心-边缘关系的形成与扩展 资本主义的扩张是欧洲国际体系生长扩张的动力 第六单元 现代国际体系的形成持续军事竞争与民族国家对竞争性市场的推动：早期欧洲的政治经济形态 政治：分裂与割据；军事竞争的持久性与残酷性 经济形态：自给自足的生产方式；远程贸易与地方贸易，互补性贸易持续的军事竞争与国家强化的无意识结果：竞争性市场的开辟持续的军事竞争与国家对财政的持续追求： 推动更有效率的生产方式 保护产权 - 税收与议会 促进资本积累 重点：市场经济、资本主义道路是在残酷的军事竞争中萌发的 市场经济对民族国家的反作用 市场经济对民族国家提供的财富与科技支持使军事竞争不断升级 市场经济通过中心-边缘关系带动民族国家向外扩张（不断寻找更廉价资源） 军事竞争与示范效应：民族国家与市场经济的推广 民族国家与市场经济的持续互动 现代国际体系的延续与扩张 均势（balance of power）：保证体系的延续 均势的历史威斯特伐利亚体系（现代国际体系形成的标志）拿破仑帝国的兴衰维也纳体系普鲁士-德国的崛起第一次世界大战凡尔赛-华盛顿体系第二次世界大战苏美两极体系中心-边缘关系的扩张 英国的崛起（英国体系） 体系背景：政经力量的不平衡发展 国家力量与社会力量的妥协与合力-宪政主义政体 国内机制：与西班牙、法国的比较-优势：公债系统（可作为现代国家诞生的标志）、宪政主义政体…… 海外扩张：与葡萄牙、荷兰的比较 荷兰（高级消费品、互补性贸易）vs 英国（一般消费品）- 英国依靠持续输送大众消费品取得强权 英国的政策： 早期重商主义政策：促进出口限制进口；关税，限制自由贸易 1846年废除谷物法，自由贸易 对外经济战略 对殖民地：限制产业 对半独立国家：坚船利炮强行贸易 对主要竞争者：限制人口流动等 中心边缘关系：原材料贸易（中心和边缘）、同质产品竞争（中心和中心） 小结： 民族国家与市场经济相辅相成、缺一不可 军事竞争、示范效应、持续互动与现代国际体系的形成 均势与国际体系的延续 中心-边缘关系与现代国际体系的扩张 国家、社会力量的妥协与英国的崛起 英国体系的崛起 第七单元 现代国际体系的演变英国体系的衰落： 背景 市场经济的全面发展 “多极”结构与“体系重合”多极：英国海上霸权，陆军较弱，霸主地位不突出体系重合：市场经济体系与民族国家竞争体系重合 自由主义贸易与国际货币体系的衰落 民族国家与贸易保护 国家货币：贸易需求量的增多 国际货币机制：金本位（货币量与黄金存储量相对应）与自动调节机制（黄金内流-发行货币量增加-通货膨胀-黄金外流-货币量减小-通货紧缩-黄金内流） 体系范围的“通货收缩趋势”与经济危机（1873-1896世界性危机、1920大萧条象征英国体系的崩溃 凯恩斯主义） 英国的衰落 国际负担与国内制度 国家利益（经济调整）与体系维持（汇率稳定）的矛盾；金融资产阶级（希望维持汇率稳定与工业资产阶级（希望维持国内经济）； 英国的选择：维持体系，最终导致国内崩溃、体系瓦解 世纪之交的大转型：资本主义对社会的全面入侵 复习：资本主义的特点 专业化生产与贸易 生产资料的私有垄断 生产力也可作为商品买卖 自给自足生产方式下的社会组织：社会关系（家族、血缘）与经济密不可分资本主义对社会的微观入侵：对血缘等社会关系的彻底颠覆（将生产力作为商品买卖）资本主义对社会的宏观入侵：英国体系的货币机制与经济危机 社会对资本主义的反弹传统自由主义政体的危局左（共产主义社会主义无政府主义）右（法西斯主义）翼政治力量的崛起间接引发第二次世界大战 双重运动（double movement）：资本主义对社会的全面入侵必将引起社会的反弹 美国体系： 二战之后美国成为霸主 对现代国际体系的修复：福利国家（welfare state）嵌入式自由主义（embedded liberalism）：解决通货膨胀和紧缩 国际货币组织 从体系重合到体系分离：美苏两极结构的确立与核武器的作用（保持军事平衡和相对稳定）"},{"title":"题解:P2231 跳蚤","path":"/2024/03/16/题解-P2231-跳蚤/","content":"题解：P2231 [HNOI2002] 跳蚤P2231 [HNOI2002] 跳蚤 - 洛谷 原问题等价于求解关于 的不定方程 的解个数。 很显然, 原方程当且仅当 时有解。 正难则反,即用 减去 的情况。 设 则 。考虑到 ，有 种 。 所以，对于 的因数 ，共有 种方式使得答案有解。 考虑能不能只考虑 的质因数的贡献。如果直接把 的质因数的贡献加起来显然可能出现同一个质因数被算进其他质因数的贡献里。考虑容斥原理。 令全集 为 的所有质因数，则 。 直接 dfs 或者 状压 即可，最终答案为 。 注意到 即 中最多含有 个元素。因此容斥时间复杂度 但考虑到需要分解质因数，因此总复杂度 。 给出关键代码: for(ll mask = 1; mask (1 k); mask++) { ll sum = 1; int cnt = 0; for(int i = 1; i = k; i++) if(mask (1ll (i - 1))) cnt++, sum *= prime[i]; if(cnt % 2 == 0) ans -= qpow(m / sum, n); else ans += qpow(m / sum, n);}","tags":["题解"]},{"title":"线段树优化建图","path":"/2024/03/10/算法笔记-线段树优化建图/","content":"线段树优化建图三种操作: 从 到 建一条边 从 到 内的每一个点都建一条边 从 内的每一个点都向 建一条边 点数,操作数 显然, 的暴力建边会 , 那么怎么优化? 看到区间显然会想到线段树 考虑到一个区间在线段树上最多可以表示成 个节点, 可以考虑建边时直接指向线段树上的节点。 建树 建立两棵线段树: 一棵入树负责管理边的终点 一棵出树负责管理边的起点 因为两棵树的叶子节点本是同一个节点,因此用边权为0的双向边连接。 入树建树时因从父亲向儿子连边权为0的有向边,出树则应从儿子连向父亲。 算法流程 考虑第二个操作:从 到 内的每一个点都建一条边。很显然,应从出树的叶子节点向入树的区间连边。 例:从 到 连边,就在线段树区间修改的递归途中边递归边连边 考虑第三个操作:从 内的每一个点都向 建一条边。跟操作二一样,应从出树的区间向入树的叶子节点连边。 例:从 到 连边。 这样,我们就解决了建图。可以证明，这样连边建出的图和原来的图没有区别。注意，两棵线段树叶子节点之间的边以及从父亲到儿子、从儿子到父亲的边是必不可少的。建图时间复杂度 。 模板题CF786B Legacy 建图直接运用上述算法即可。 跑最短路时注意以下几点: 需要记录每个原始节点在两棵线段树中分别的位置,以供进行2,3操作 进行操作时需要在记录的线段树上的位置上操作 连边时注意方向以及叶子节点之间的边、父亲到儿子、儿子到父亲的边,这样跑出来的最短路才是对的 代码见 线段树优化建图模板","tags":["算法笔记"]},{"title":"Hello World","path":"/2024/03/02/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new My New Post More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment"},{"path":"/1970/01/01/生成函数笔记/","content":"生成函数入门对于无穷数列 $a_0,a_1,a_2,\\cdots$，其生成函数 $f(x)\\sum\\limits_{i0}^{\\infty}a_ix^i$。记号 $[x^n]$ 表示 $x^n$ 项的系数，也即 $a_n$。 那么，它就有好多性质。考虑这样一个问题：我们有 $n$ 个背包，对于第 $i$ 个背包，它有能够选若干数，而选 $x$ 个数的方案数 $a_x$。那么我们就可以为这个背包考虑其生成函数 $f_i(x)$。现在，我们要在这 $n$ 个背包中选总共 $m$ 个数。那么，答案就是 $[x^m]\\prod\\limits_{i1}^nf_i$，即将这些背包卷起来。 一些常用性质： $[x^n]\\sum\\limits_{i0}^{\\infty}x^i[x^n]\\frac{1}{1-x}$，因为 $[x^n] (1+xf(x))[x^n]f(x)$ $[x^n]\\sum\\limits_{i0}^{\\infty}x^{ki}[x^n]\\frac{1}{1-x^k}$ $\\frac{1}{(1-x)^n}(1+x+x^2\\cdots)^n\\sum\\limits_{i0}^{\\infty}\\binom{n+i-1}{i-1}x^i$，因为考虑其组合意义，即为 $\\sum\\limits_{j1}^na_ji$ 的非负整数解个数，插板即可。 P1450 [HAOI2008] 硬币购物题目传送门 题目描述共有 $4$ 种硬币。面值分别为 $c_1,c_2,c_3,c_4$。 某人去商店买东西，去了 $n$ 次，对于每次购买，他带了 $d_i$ 枚 $i$ 种硬币，想购买 $s$ 的价值的东西。请问每次有多少种付款方法。 $s\\leq 10^5,n\\leq 1000$。 做法考虑第 $i$ 个硬币的生成函数，$f(x)1+x^c+x^{2c}+\\cdots+x^{dc}\\frac{1-x^{c(d+1)}}{1-x^c}$。 那么，把这四个硬币的生成函数卷起来，答案即是 $[x^s]\\prod\\limits_{k1}^4 \\frac{1-x^{c_k(d_k+1)}}{1-x^{c_k}}[x^s]\\prod\\limits_{k1}^4(1-x^{c_k(d_k+1)})\\prod\\limits_{k1}^4(\\sum\\limits_{i0}^{\\infty}x^{c_ki})$。 考虑后面那个求积是什么，其本质就是去掉了 $d_i$ 的限制，也即 $4$ 个物品的完全背包。 那么最后要做的就是算出前面的 $\\prod\\limits_{k1}^4(1-x^{c_k(d_k+1)})$，直接暴力 $2^4$ 算，然后和预处理的完全背包再卷一下即可。时间复杂度 $O(V+16n)$。 推广有 $n$ 种物品，每种物品有重量 $w_i$ 和个数 $a_i$，问拼出重量为 $k$ 的方案数（同种物品视为相同）。 将每种物品的生成函数写出来 $F_i(x)1+x^{w_i}+x^{2w^i}+\\cdots+x^{a_iw_i}$。 令 $G_i(x)\\sum\\limits_{j0}^{\\infty}x^{jw_i}$。 可以得到 $F_i(x)G_i(x)-x^{(a_i+1)w_i}G_i(x)$。而 $G$ 可以由完全背包直接 $O(nk)$ 求出，而后面减去的即是完全背包完集体后移 $x^{(a_i+1)w_i}$ 项得到的，直接前缀和优化一下即可做到 $O(nk)$。所以每次拿原来的生成函数拿来做一次完全背包然后再应用上述算法即可。 代码长成这样： f[0] = 1;for(int i = 1; i = n; i++) for(int j = 0; j = k; j++) sum[j] = f[j]; if(j = w[i]) (sum[j] += sum[j-w[i]]) %= mod; for(int j = 0; j = k; j++) if(j w[i] * (a[i] + 1)) f[j] = sum[j]; else f[j] = (sum[j] - sum[j-w[i]*(a[i]+1)] + mod) % mod;\tmemset(sum, 0, sizeof(sum)); LOJ 6077LOJ 6077 题意：求长度为 $n$，逆序对数为 $k$ 的排列个数。$n,k\\leq 10^5$。 其实难点在 dp。dp 套路来源于 LOJ 6089。 从小到大挨个插入 $1\\cdots n$，则 $i$ 可以产生 $0\\cdots i - 1$ 个逆序对。 那么 $i$ 的生成函数为 $F_i(x)1+x+\\cdots x^{i-1}\\frac{x^i-1}{x-1}$。把这 $n$ 个函数卷起来，答案即为 $[x^k]\\frac{\\prod\\limits_{i\\geq 0} (1-x^i)}{(1-x)^n}$。分母即为 $\\sum\\limits_{i0}^{\\infty}\\binom{n+i-1}{i-1}x^i$。 重点即为求 $\\prod\\limits_{i\\geq 0}(1-x^i)$。考虑其组合意义，即为在 $1\\cdots n$ 中选若干个数使其和为 $i$，且若选出的为奇数个数，则贡献为 $-1$，否则为 $+1$。 设 $f_{i,j}$ 为选了 $i$ 个数，和为 $j$ 的贡献。转移为： 使选的数都 $+1$ 使选的数都 $+1$，并新选一个 $1$。 注意此时第一维是 $O(\\sqrt{n})$ 的，整个 dp 即是 $O(n\\sqrt{n})$ 的。 此时有可能选了 $n$ 的数，那么对于 $j\\geq n + 1,f_{i,j}\\leftarrow f_{i,j}-f_{i-1,j-n-1}$。 则分子中 $x_i$ 次项系数即为 $\\sum\\limits_{i\\geq0} (-1)^i f_{j,i}$。"}]